<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Günlük Çark | Puan Topla</title>
  <meta name="description" content="Günlük enerji ile çarkı çevir, puan topla, liderboard'a gir ve marketten alışveriş yap!" />
  <link rel="stylesheet" href="./styles.css" />
  <script defer src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script defer src="./supabaseClient.js"></script>
  <script defer src="./app.js"></script>
</head>
<body>
  <header class="container">
    <div class="brand">
      <h1>Çark Puan</h1>
      <p>Günlük enerji ile çarkı çevir ve kazan!</p>
    </div>
    <nav>
      <button id="openLogin" class="btn ghost">Giriş</button>
      <button id="openRegister" class="btn">Kayıt Ol</button>
      <button id="logoutBtn" class="btn danger hidden">Çıkış</button>
    </nav>
  </header>

  <main class="container grid">
    <section class="card">
      <h2>Çark</h2>
      <canvas id="wheelCanvas" width="360" height="360"></canvas>
      <div class="wheel-ctrls">
        <button id="spinBtn" class="btn primary">Çevir</button>
        <div class="pill">Enerji: <span id="energyVal">0</span></div>
      </div>
      <p id="spinResult" class="result"></p>
    </section>

    <section class="card">
      <h2>Profil</h2>
      <p>Kullanıcı: <strong id="usernameLabel">-</strong></p>
      <p>Puanın: <strong id="myPoints">0</strong></p>
      <p>Bugün durum: <span id="todayStatus">-</span></p>
    </section>

    <section class="card">
      <h2>Lider Tablosu (Top 10)</h2>
      <ol id="leaderboardList" class="lb"></ol>
    </section>

    <section class="card">
      <h2>Market</h2>
      <div id="marketList" class="market"></div>
    </section>
  </main>

  <!-- Register Modal -->
  <dialog id="registerModal">
    <form method="dialog" class="modal">
      <h3>Hesap Oluştur</h3>
      <label>Kullanıcı Adı
        <input id="regUsername" type="text" required minlength="3" maxlength="20" />
      </label>
      <label>GSM (E.164 formatı, ör. +905551112233)
        <input id="regGsm" type="tel" required placeholder="+905..." />
      </label>
      <label>E-posta
        <input id="regEmail" type="email" required />
      </label>
      <label>Şifre
        <input id="regPassword" type="password" required minlength="6" />
      </label>
      <div class="modal-actions">
        <button id="registerBtn" class="btn primary">Kayıt Ol</button>
        <button class="btn ghost" value="cancel">İptal</button>
      </div>
      <p id="registerError" class="error"></p>
    </form>
  </dialog>

  <!-- Login Modal -->
  <dialog id="loginModal">
    <form method="dialog" class="modal">
      <h3>Giriş Yap</h3>
      <label>E-posta
        <input id="loginEmail" type="email" required />
      </label>
      <label>Şifre
        <input id="loginPassword" type="password" required />
      </label>
      <div class="modal-actions">
        <button id="loginBtn" class="btn primary">Giriş</button>
        <button class="btn ghost" value="cancel">İptal</button>
      </div>
      <p id="loginError" class="error"></p>
    </form>
  </dialog>

  <footer class="container">
    <a href="./admin.html">Yönetim Paneli</a>
  </footer>
</body>
</html>
